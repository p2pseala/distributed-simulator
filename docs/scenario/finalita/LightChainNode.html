<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (18) on Wed Jul 19 07:31:40 PDT 2023 -->
<title>LightChainNode</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2023-07-19">
<meta name="description" content="declaration: package: scenario.finalita, class: LightChainNode">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">scenario.finalita</a></div>
<h1 title="Class LightChainNode" class="title">Class LightChainNode</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">scenario.finalita.LightChainNode</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../node/BaseNode.html" title="interface in node">BaseNode</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">LightChainNode</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../../node/BaseNode.html" title="interface in node">BaseNode</a></span></div>
<div class="block">A LightChainNode represents a single node of the LightChain protocol.
 Given the limitations of the simulator this implementation defines two types of LightChain Nodes.
 A regular LightChainNode, and a registry node.
 A regular LightChain node performs the typical LightChain protocol.
 Whereas the registry node represents the underlying skip graph overlay,
 where it keeps the list of inserted transactions and blocks,
 and receive requests from different nodes to submit and retrieve transactions and blocks.
 This means that this class contains attributes
 and functions for two different types of node.
 This division is result of the fact that the simulator design can handle only a single node type.
 Perhaps it would be an interesting idea to extend it later to support more than
 one type of nodes.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">LightChainNode</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(node.Identifier,network.Network)" class="member-name-link">LightChainNode</a><wbr>(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;nodeId,
 <a href="../../network/Network.html" title="class in network">Network</a>&nbsp;network)</code></div>
<div class="col-last odd-row-color">
<div class="block">Constructor of LightChain Node.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addTransaction(scenario.finalita.Transaction)" class="member-name-link">addTransaction</a><wbr>(<a href="Transaction.html" title="class in scenario.finalita">Transaction</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function is invoked from a node to insert a transaction after it has been validated.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#appendBlock(scenario.finalita.Block)" class="member-name-link">appendBlock</a><wbr>(<a href="Block.html" title="class in scenario.finalita">Block</a>&nbsp;block)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invoked by a node that is inserting a block after it has been validated to the registry.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Transaction.html" title="class in scenario.finalita">Transaction</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#collectTransactions(node.Identifier,java.lang.Integer)" class="member-name-link">collectTransactions</a><wbr>(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;requester,
 <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;requiredNumber)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function is called from a node that is attempting to collect transaction to create a block.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#confirmBlockValidation(node.Identifier)" class="member-name-link">confirmBlockValidation</a><wbr>(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;blockId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Confirms validation of the block with its Identifier.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#confirmTransactionValidation(node.Identifier)" class="member-name-link">confirmTransactionValidation</a><wbr>(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;txId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function is invoked when a validator wants to confirm their validation of a transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deliverTransactions(java.util.List)" class="member-name-link">deliverTransactions</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Transaction.html" title="class in scenario.finalita">Transaction</a>&gt;&nbsp;requestedTransactions)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Delivers requested transactions to the node.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="Block.html" title="class in scenario.finalita">Block</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLatestBlock(node.Identifier)" class="member-name-link">getLatestBlock</a><wbr>(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;requester)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function is invoked as a result of a node requesting the latest block from the registry.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../node/Identifier.html" title="class in node">Identifier</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRegistryId()" class="member-name-link">getRegistryId</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">getter of registry node's ID.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../node/Identifier.html" title="class in node">Identifier</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getValidators()" class="member-name-link">getValidators</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function randomly chooses validators of a certain transaction using the Reservoir Sampling Algorithm
 see https://www.geeksforgeeks.org/reservoir-sampling/</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isRegistry()" class="member-name-link">isRegistry</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checker whether the node is a registry node or not.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../node/BaseNode.html" title="interface in node">BaseNode</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#newInstance(node.Identifier,java.lang.String,network.Network)" class="member-name-link">newInstance</a><wbr>(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;selfId,
 <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;nameSpace,
 <a href="../../network/Network.html" title="class in network">Network</a>&nbsp;network)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">creates a new instance of LightChainNode.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onCreate(java.util.ArrayList)" class="member-name-link">onCreate</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../../node/Identifier.html" title="class in node">Identifier</a>&gt;&nbsp;allId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">On the creation of a LightChain node, first the node checks if it is a registry node or not.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onNewMessage(node.Identifier,network.model.Event)" class="member-name-link">onNewMessage</a><wbr>(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;originId,
 <a href="../../network/model/Event.html" title="interface in network.model">Event</a>&nbsp;event)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Performs the action of the message by passing an instance of this LightChain Node.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onStart()" class="member-name-link">onStart</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">starts the LightChain Node by starting its iteration to insert transactions and mine blocks.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onStop()" class="member-name-link">onStop</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Stops the LightChain Node.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../node/Identifier.html" title="class in node">Identifier</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#requestLatestBlock()" class="member-name-link">requestLatestBlock</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function is called by this node to request the latest block from the registry node asynchronously, then it
 sleeps the thread for a while to give time for the registry node to send the latest block.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#requestTransactions()" class="member-name-link">requestTransactions</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function is called to request a collection of transactions from the registry node.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startBlockInsertion()" class="member-name-link">startBlockInsertion</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function handles the collection of transactions and casting them into blocks and then inserting these blocks.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startTransactionInsertions()" class="member-name-link">startTransactionInsertions</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Function attempts to iterate and insert the required number of transactions into the network.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateLatestBlock(scenario.finalita.Block)" class="member-name-link">updateLatestBlock</a><wbr>(<a href="Block.html" title="class in scenario.finalita">Block</a>&nbsp;block)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">this function is called by the registry node through an event in order to supply this node with the latest block
 upon its asynchronous request that was carried out earlier.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateWait()" class="member-name-link">updateWait</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function causes the thread to sleep for a fixed time between sending a request and awaiting its response in
 order to give time for the response to arrive.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#validateBlock(scenario.finalita.Block)" class="member-name-link">validateBlock</a><wbr>(<a href="Block.html" title="class in scenario.finalita">Block</a>&nbsp;block)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#validateTransaction(scenario.finalita.Transaction)" class="member-name-link">validateTransaction</a><wbr>(<a href="Transaction.html" title="class in scenario.finalita">Transaction</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function is invokes when another node requests a validation from this node.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(node.Identifier,network.Network)">
<h3>LightChainNode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">LightChainNode</span><wbr><span class="parameters">(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;nodeId,
 <a href="../../network/Network.html" title="class in network">Network</a>&nbsp;network)</span></div>
<div class="block">Constructor of LightChain Node.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>nodeId</code> - identifier of the node</dd>
<dd><code>network</code> - used to communicate with other nodes</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>LightChainNode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">LightChainNode</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="onCreate(java.util.ArrayList)">
<h3>onCreate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onCreate</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../../node/Identifier.html" title="class in node">Identifier</a>&gt;&nbsp;allId)</span></div>
<div class="block">On the creation of a LightChain node, first the node checks if it is a registry node or not.
 A registry node is the node of Identifier placed in index 0 of allID list.
 This convention is pre-defined for LightChainNode.
 So the node checks if its Identifier matches the UUID of the 0-index element of allID.
 If it matches then it sets isRegistry variable to true, or false otherwise.
 If the node is the registry node, then it appends the genesis block to its list of blocks.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../node/BaseNode.html#onCreate(java.util.ArrayList)">onCreate</a></code>&nbsp;in interface&nbsp;<code><a href="../../node/BaseNode.html" title="interface in node">BaseNode</a></code></dd>
<dt>Parameters:</dt>
<dd><code>allId</code> - the IDs of type Identifier for all the nodes in the cluster</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onStart()">
<h3>onStart</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onStart</span>()</div>
<div class="block">starts the LightChain Node by starting its iteration to insert transactions and mine blocks.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../node/BaseNode.html#onStart()">onStart</a></code>&nbsp;in interface&nbsp;<code><a href="../../node/BaseNode.html" title="interface in node">BaseNode</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onStop()">
<h3>onStop</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onStop</span>()</div>
<div class="block">Stops the LightChain Node.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../node/BaseNode.html#onStop()">onStop</a></code>&nbsp;in interface&nbsp;<code><a href="../../node/BaseNode.html" title="interface in node">BaseNode</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onNewMessage(node.Identifier,network.model.Event)">
<h3>onNewMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onNewMessage</span><wbr><span class="parameters">(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;originId,
 <a href="../../network/model/Event.html" title="interface in network.model">Event</a>&nbsp;event)</span></div>
<div class="block">Performs the action of the message by passing an instance of this LightChain Node.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../node/BaseNode.html#onNewMessage(node.Identifier,network.model.Event)">onNewMessage</a></code>&nbsp;in interface&nbsp;<code><a href="../../node/BaseNode.html" title="interface in node">BaseNode</a></code></dd>
<dt>Parameters:</dt>
<dd><code>originId</code> - the ID of the sender node</dd>
<dd><code>event</code> - the content of the message</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="newInstance(node.Identifier,java.lang.String,network.Network)">
<h3>newInstance</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../node/BaseNode.html" title="interface in node">BaseNode</a></span>&nbsp;<span class="element-name">newInstance</span><wbr><span class="parameters">(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;selfId,
 <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;nameSpace,
 <a href="../../network/Network.html" title="class in network">Network</a>&nbsp;network)</span></div>
<div class="block">creates a new instance of LightChainNode.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../node/BaseNode.html#newInstance(node.Identifier,java.lang.String,network.Network)">newInstance</a></code>&nbsp;in interface&nbsp;<code><a href="../../node/BaseNode.html" title="interface in node">BaseNode</a></code></dd>
<dt>Parameters:</dt>
<dd><code>selfId</code> - the ID of the new node</dd>
<dd><code>nameSpace</code> - string tag to virtually group the nodes (with identical tags)</dd>
<dd><code>network</code> - communication network for the new node</dd>
<dt>Returns:</dt>
<dd>a new instance of LightChainNode</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="appendBlock(scenario.finalita.Block)">
<h3>appendBlock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">appendBlock</span><wbr><span class="parameters">(<a href="Block.html" title="class in scenario.finalita">Block</a>&nbsp;block)</span></div>
<div class="block">Invoked by a node that is inserting a block after it has been validated to the registry.
 It also provides a lock to ensure the correctness of the write operations on the ledger.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>block</code> - block to be appended to the ledger</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startTransactionInsertions()">
<h3>startTransactionInsertions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startTransactionInsertions</span>()</div>
<div class="block">Function attempts to iterate and insert the required number of transactions into the network.
 First, the node request an update of its view of the latest block.
 Then, it gets the validators of the transaction.
 Then it asynchronously asks the validators to validate the transactions.
 Once the transaction is validated by all validators, ConfirmTransactionValidation detects it
 above and that function will take care of inserting the transaction.


 <p>TODO: This function is supposed to run either on a different thread from the block insertion, or incorporate the
 block insertion within it somehow</div>
</section>
</li>
<li>
<section class="detail" id="startBlockInsertion()">
<h3>startBlockInsertion</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startBlockInsertion</span>()
                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></span></div>
<div class="block">This function handles the collection of transactions and casting them into blocks and then inserting these blocks.
 to the registry</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="confirmTransactionValidation(node.Identifier)">
<h3>confirmTransactionValidation</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">confirmTransactionValidation</span><wbr><span class="parameters">(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;txId)</span>
                                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></span></div>
<div class="block">This function is invoked when a validator wants to confirm their validation of a transaction. The LightChain node
 maintains a map with a counter for every transaction it creates. This function receives the Identifier of the
 transaction
 that is being verified, and it increases its counter. Once the counter of a transaction is equal to the number of
 validators, this means the transaction has been validated and is ready to be inserted. So this function attempts
 to insert the transaction into the network by sending submit transaction event to the registry node.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>txId</code> - unique Id of the trasaction.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRegistryId()">
<h3>getRegistryId</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../node/Identifier.html" title="class in node">Identifier</a></span>&nbsp;<span class="element-name">getRegistryId</span>()</div>
<div class="block">getter of registry node's ID.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the Identifier of the registry node.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="confirmBlockValidation(node.Identifier)">
<h3>confirmBlockValidation</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">confirmBlockValidation</span><wbr><span class="parameters">(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;blockId)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></span></div>
<div class="block">Confirms validation of the block with its Identifier.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>blockId</code> - Identifier of the block.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="validateTransaction(scenario.finalita.Transaction)">
<h3>validateTransaction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">validateTransaction</span><wbr><span class="parameters">(<a href="Transaction.html" title="class in scenario.finalita">Transaction</a>&nbsp;transaction)</span></div>
<div class="block">This function is invokes when another node requests a validation from this node. It essentially accepts
 the validation without any conditions and immediately replies with its confirmation
 f* TODO: with is algorithm, a node can be chosen to be its own validator, fix this to prevent this case.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transaction</code> - a transaction object to validate.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="validateBlock(scenario.finalita.Block)">
<h3>validateBlock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">validateBlock</span><wbr><span class="parameters">(<a href="Block.html" title="class in scenario.finalita">Block</a>&nbsp;block)</span></div>
</section>
</li>
<li>
<section class="detail" id="getValidators()">
<h3>getValidators</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../node/Identifier.html" title="class in node">Identifier</a>&gt;</span>&nbsp;<span class="element-name">getValidators</span>()</div>
<div class="block">This function randomly chooses validators of a certain transaction using the Reservoir Sampling Algorithm
 see https://www.geeksforgeeks.org/reservoir-sampling/</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a list of Identifiers of randomly chosen nodes from the network</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isRegistry()">
<h3>isRegistry</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isRegistry</span>()</div>
<div class="block">Checker whether the node is a registry node or not.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if this node is a registry node, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateLatestBlock(scenario.finalita.Block)">
<h3>updateLatestBlock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateLatestBlock</span><wbr><span class="parameters">(<a href="Block.html" title="class in scenario.finalita">Block</a>&nbsp;block)</span></div>
<div class="block">this function is called by the registry node through an event in order to supply this node with the latest block
 upon its asynchronous request that was carried out earlier.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>block</code> - block to update the node</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateWait()">
<h3>updateWait</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateWait</span>()</div>
<div class="block">This function causes the thread to sleep for a fixed time between sending a request and awaiting its response in
 order to give time for the response to arrive.</div>
</section>
</li>
<li>
<section class="detail" id="requestLatestBlock()">
<h3>requestLatestBlock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../node/Identifier.html" title="class in node">Identifier</a></span>&nbsp;<span class="element-name">requestLatestBlock</span>()</div>
<div class="block">This function is called by this node to request the latest block from the registry node asynchronously, then it
 sleeps the thread for a while to give time for the registry node to send the latest block. This is necessary given
 that the simulator only support asynchronous events.</div>
</section>
</li>
<li>
<section class="detail" id="requestTransactions()">
<h3>requestTransactions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">requestTransactions</span>()</div>
<div class="block">This function is called to request a collection of transactions from the registry node.</div>
</section>
</li>
<li>
<section class="detail" id="deliverTransactions(java.util.List)">
<h3>deliverTransactions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deliverTransactions</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Transaction.html" title="class in scenario.finalita">Transaction</a>&gt;&nbsp;requestedTransactions)</span></div>
<div class="block">Delivers requested transactions to the node.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>requestedTransactions</code> - List of requested transactions.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addTransaction(scenario.finalita.Transaction)">
<h3>addTransaction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addTransaction</span><wbr><span class="parameters">(<a href="Transaction.html" title="class in scenario.finalita">Transaction</a>&nbsp;transaction)</span>
                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></span></div>
<div class="block">This function is invoked from a node to insert a transaction after it has been validated.
 It simply appends the transaction to the list of available transactions for collection. It also provides locking
 to ensure the correctness of adding and removing transactions.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>transaction</code> - transaction to be inserted into the network</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="collectTransactions(node.Identifier,java.lang.Integer)">
<h3>collectTransactions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Transaction.html" title="class in scenario.finalita">Transaction</a>&gt;</span>&nbsp;<span class="element-name">collectTransactions</span><wbr><span class="parameters">(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;requester,
 <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&nbsp;requiredNumber)</span>
                                      throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></span></div>
<div class="block">This function is called from a node that is attempting to collect transaction to create a block. It takes a set
 of transactions and returns a list of then.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>requester</code> - ID of node requesting transactions</dd>
<dd><code>requiredNumber</code> - the required number of transactions</dd>
<dt>Returns:</dt>
<dd>a list of transactions matching the number required</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLatestBlock(node.Identifier)">
<h3>getLatestBlock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Block.html" title="class in scenario.finalita">Block</a></span>&nbsp;<span class="element-name">getLatestBlock</span><wbr><span class="parameters">(<a href="../../node/Identifier.html" title="class in node">Identifier</a>&nbsp;requester)</span>
                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></span></div>
<div class="block">This function is invoked as a result of a node requesting the latest block from the registry.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>requester</code> - of the node requesting the latest block so that its request can be delivered</dd>
<dt>Returns:</dt>
<dd>the latest block on the ledger</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
